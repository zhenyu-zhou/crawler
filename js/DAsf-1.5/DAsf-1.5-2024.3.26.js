/**
 * @license
 * Copyright (c) 2014, Amazon.com
 * DACX SafeFrame v1.5 -- 2015-02-24T13:20:41
*/
!function(a,b){function c(a){var b,c;try{if(b=JSON.parse(a.data),c=x[b.arid],!c||a.origin!==t||"object"!=typeof b.data)throw"Invalid Message: "+JSON.stringify(a.data)}catch(d){return void n("Received Error: "+a.data,d)}c.options.debug&&console&&console.log(a);try{var e=z[b.command];e&&e(c,b.data)}catch(d){n("Problem with message: "+JSON.stringify(a.data),d,"WARN")}}function d(b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function e(a,c,d){var e=b.createElement("script");e.charset=d||"utf-8",e.src=a,c.appendChild(e)}function f(a,b){var c=/^((?:https?:)?\/\/)?([\w\-\.]+(?::[0-9]+)?)\/?(.*)$/,d=a.match(c)[2];return d==b}function g(a,b){return a.height==b.height&&a.width==b.width}function h(a,b,c){if(!b||"object"!=typeof b)return!1;for(var d=0,e=b.length;e>d;d++)if(c(a,b[d]))return!0;return!1}function i(b,c){a.DAF=[b,c],a.DA.s(a.DA.f+"-external")}function j(b,c){var d=A[b];"function"==typeof a[d]&&a[d](b,c,{wb:1})}function k(a,b){if(y[a])try{y[a](b)}catch(c){n("Custom Message Error",c)}else n("Unrecognized custom message key: "+a,null,"WARN")}function l(a){try{var c,d=JSON.stringify(a);/MSIE (6|7|8)/.test(navigator.userAgent)?c=b.createElement("<iframe name='"+d+"'>"):(c=b.createElement("iframe"),c.name=d),c.src=s,c.scrolling="no",c.height=a.size.height||"250px",c.width=a.size.width||"300px",c.setAttribute("frameborder","0"),c.setAttribute("marginheight","0"),c.setAttribute("marginwidth","0"),c.setAttribute("scrolling","no"),c.setAttribute("allowtransparency","true"),c.setAttribute(u,a.arid),c.style.cssText=a.iframeExtraStyle||"",c.a=a.aanParams||{},c.f=a.feedbackJsUrl||1,c.c=a.campaignId,c.isSafeframeGoldbox="goldbox-ads"==a.slotName;var e=b.getElementById(a.slot);e.innerHTML="",e.appendChild(c),x[a.arid]={slot:e,iframe:c,options:a}}catch(f){n("Error creating safeFrame",f)}}function m(a,c){if("windowOnLoad"===a)"complete"===b.readyState?c():d("load",c);else if("spATFEvent"===a)v?P.when("search-page-utilities").execute(function(a){a.afterEvent("spATFEvent",c)}):w?amznJQ.available("search-js-general",function(){SPUtils.afterEvent("spATFEvent",c)}):c();else if("criticalFeature"===a)v?P.when("cf").execute(c):w?amznJQ.onCompletion("amznJQ.criticalFeature",c):c();else if("r2OnLoad"===a)v?P.when("r2Loaded").execute(c):w?amznJQ.onReady("r2Loaded",c):c();else if(a.match("[^:]+:.+")){var e=a.split(":");if(e.length>1){var f=e[0],g=e[1],h=e.length>2?e[2]:g;v?P.when(h,"A").execute(c):w?amznJQ[f](g,c):c()}else c()}else c()}function n(b,c,d){c=c||new Error(b),a.ueLogError?a.ueLogError(c,{logLevel:d||"ERROR",attribution:"DACX-safeframe",message:b+" "}):console&&console.error&&console.error(b,c)}function o(a){try{"function"!=typeof d16g_addFeedbackLink||a.isFeedbackLoaded||(a.isFeedbackLoaded=!0,d16g_addFeedbackLink(a))}catch(b){}}function p(){for(var a in x){var b=x[a].iframe;o(b)}}function q(c){var d=x[c.arid].iframe;if(a.DA){var e="function"!=typeof d16g_addFeedbackLink?1e3:0;setTimeout(function(){o(d)},e)}else if(c.daJsUrl){a.DA=a.DA=[];var f=b.createElement("script");f.src=c.daJsUrl,f.onload=f.onreadystatechange=function(){f.onload=f.onreadystatechange=null,p()},b.getElementsByTagName("head")[0].appendChild(f)}}if(a.DAsf)return void a.DAsf.loadAds();a.DAsf={version:"1.5"};var r="text/x-dacx-safeframe",s="http://dew9ckzjyt2gn.cloudfront.net/sf/sf-1.5.html",t="http://dew9ckzjyt2gn.cloudfront.net",u="data-arid",v="undefined"!=typeof P,w="undefined"!=typeof amznJQ,x={},y={},z={changeSize:function(a,b){var c=a.options.allowedSizes;if(h(b,c,g))a.iframe.height=b.height,a.iframe.width=b.width;else{var d="Size is not whitelisted: "+b.width+" x "+b.height;n(d)}},collapseSlot:function(a){a.slot.style.display="none"},embedScript:function(a,b){var c=a.options.allowedDomains;if(h(b.src,c,f))e(b.src,a.slot,b.charset);else{var d="Domain is not whitelisted: "+b.src;n(d)}},adFeedback:function(a){i(a.options.campaignId,a.options.aanParams)},logError:function(a,b){n(b.message,b.error,b.level)},sendMetrics:function(a,b){j(b.metric,a.options.slot)},customMessage:function(a,b){k(b.key,b.body)},adDetails:function(a,b){a.options.aanResponse=b.aanResponse}},A={wb:"ues",bb:"uet",af:"uet",ld:"uex"};d("message",c),a.DAsf.registerCustomMessageListener=function(a,b,c){var d=!1;try{if(!y[a]||"function"!=typeof y[a]||c)y[a]=b,d=!0;else{var e=new Error("Custom message listener already exists for key: "+a);n("Duplicate Key",e,"WARN")}}catch(f){n("Error registering custom message listener",f)}return d},a.DAsf.isSafeframeAd=function(a){var b=!1;return"string"==typeof a&&(b="undefined"!=typeof x[a]),b},a.DAsf.getAdDetails=function(b){if(!a.DAsf.isSafeframeAd(b))return!1;var c=x[b].options.aanResponse||{},d={creativeId:c.creativeId||"",adId:c.adId||"",adNetwork:x[b].options.adServer||"",hostName:x[b].options.daJsUrl||"",iframe:x[b].iframe};return d},a.DAsf.openAdFeedback=function(a){try{var b=x[a];i(b.options.campaignId,b.options.aanParams)}catch(c){n("Error opening feedback",c)}},a.DAsf.loadAds=function(){for(var c=b.getElementsByTagName("script"),d=0,e=null;e=c[d++];)if(e.getAttribute("type")==r&&!e.getAttribute(u)){var f=e.text||e.innerHTML||e.innerText;try{f=JSON.parse(f),f.arid=f.arid||Math.random().toString(16).slice(2),e.setAttribute(u,f.arid),f.hostDomain=location.protocol+"//"+location.host,f.allowedSizes="object"==typeof f.allowedSizes&&f.allowedSizes.length>=0?f.allowedSizes.concat(f.size):[f.size];var g="d3l3lkinz3f56t.cloudfront.net".split(",");f.allowedDomains="object"==typeof f.allowedDomains&&f.allowedDomains.length>=0?f.allowedDomains.concat(g):g,f.productAdsUrl=a.paSearchTowerAdsURL||a.paCusRevAllURL,f.parentLocation=location.origin||location.protocol+location.hostname,j("af",f.slot),m(f.loadAfter,function(){l(f),q(f)})}catch(h){f=null,n("Error parsing sf tag",h)}}},"function"!=typeof a.postMessage&&n("Post Message unsupported"),a.DAsf.loadAds()}(window,document);